#!/bin/sh

cd /opt/bin
case "$1" in
  ''|'-h'|'--help') echo "
  Usage: appman [options]
  where options include:
  
  -h, --help	Print this message.
  -c, clean	Cleans /opt/bin by removing all *zs-old backup files.
  -s, sync	Updates the list of available apps.
  -u, update	Update all the AppImages in /opt/bin using appimageupdate.
  		and asks to remove residual *zs-old backup files.
  -a, sdk	Install the latest platform tools for Android.
  
  COMMANDS:
  
  appman-install [application] 	- Install an application.
  
  appman-remove [application] 	- Removes an application and its files.


  For a complete list of available applications, visit:
  
  https://github.com/ivan-hc/AppMan/tree/main/applications
  
  " ;;
  '-u'|'update') exec /opt/bin/appman-update ;;
  '-c'|'clean') cd /opt/bin; echo ""; echo "Removing all backup files available in /opt/bin..."; sleep 1;
	echo ""; rm *zs-old; echo ""; echo "All *zs-old backup files are removed, exiting."; echo "" ;;
  '-a'|'sdk') cd ~/.android;	wget https://dl.google.com/android/repository/platform-tools-latest-linux.zip;
  	rm -R ./platform-tools;	unzip ./platform-tools-latest-linux.zip; rm ./platform-tools-latest-linux.zip ;;
  '-s'|'sync') cd /opt/bin; rm /opt/bin/appman-install /opt/bin/appman-remove;
	wget https://raw.githubusercontent.com/ivan-hc/AppMan/main/opt/bin/appman-install && chmod a+x ./appman-install;
	wget https://raw.githubusercontent.com/ivan-hc/AppMan/main/opt/bin/appman-remove && chmod a+x ./appman-remove ;;
  *) exec /opt/bin/appman ;;
esac
